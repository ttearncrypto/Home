<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F9XR Advanced Dashboard v2</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Add more fonts for selection -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Roboto:wght@300;400;500;700&family=Lato:wght@300;400;700&family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
        /* --- Base & Reset --- */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        html {
            font-size: 16px; /* Base size, JS will modify this */
            line-height: 1.6;
            background-color: transparent;
            height: 100%;
            overflow: hidden;
            /* Apply font family via variable */
            font-family: var(--f9xr-font-family, 'Poppins', sans-serif);
        }

        /* --- CSS Variables --- */
        .f9xr-dashboard-container {
            /* Spacing */
            --f9xr-space-xxs: 0.25rem; /* 4px */
            --f9xr-space-xs: 0.5rem;   /* 8px */
            --f9xr-space-sm: 0.75rem;  /* 12px */
            --f9xr-space-md: 1rem;     /* 16px */
            --f9xr-space-lg: 1.5rem;   /* 24px */
            --f9xr-space-xl: 2rem;     /* 32px */
            --f9xr-space-xxl: 3rem;    /* 48px */

            /* Borders */
            --f9xr-border-radius-sm: 4px;
            --f9xr-border-radius-md: 8px;
            --f9xr-border-radius-lg: 12px;
            --f9xr-border-width: 1px;

             /* Transitions */
            --f9xr-transition-fast: 0.2s ease;
            --f9xr-transition-medium: 0.3s ease;
            --f9xr-transition-slow: 0.5s ease;

             /* Sidebar */
             --f9xr-sidebar-width: 280px; /* Default width */
             --f9xr-sidebar-collapsed-width: 70px;
             --f9xr-sidebar-item-vertical-padding: var(--f9xr-space-sm); /* Adjustable item height */

            /* Fonts */
            --f9xr-font-family: 'Poppins', sans-serif; /* Default font */
        }

        /* --- Light Theme Variables --- */
        .f9xr-dashboard-container.f9xr-light-theme {
            --f9xr-bg-primary: #ffffff;
            --f9xr-bg-secondary: #f9fafb; /* Off white */
            --f9xr-bg-tertiary: #f3f4f6; /* Lighter gray */
            --f9xr-text-primary: #1f2937; /* Dark Gray Blue */
            --f9xr-text-secondary: #4b5563; /* Medium Gray Blue */
            --f9xr-text-muted: #6b7280; /* Gray */
            --f9xr-accent-primary: #2563eb; /* Medium Blue */
            --f9xr-accent-secondary: #059669; /* Medium Emerald */
            --f9xr-border-color: rgba(0, 0, 0, 0.1);
            --f9xr-card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
            --f9xr-card-hover-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --f9xr-gradient-bg: linear-gradient(135deg, var(--f9xr-bg-secondary) 0%, var(--f9xr-bg-primary) 100%);
            --f9xr-gradient-header: linear-gradient(to right, rgba(255, 255, 255, 0.8), rgba(249, 250, 251, 0.6));
            --f9xr-hr-color: linear-gradient(to right, transparent, var(--f9xr-border-color), transparent);
             --f9xr-iframe-bg: var(--f9xr-bg-tertiary);
             --f9xr-loader-dot-color: var(--f9xr-accent-primary);
             --f9xr-scrollbar-thumb: #cbd5e1;
             --f9xr-scrollbar-thumb-hover: #94a3b8;
             --f9xr-sidebar-bg: rgba(255, 255, 255, 0.9);
             --f9xr-sidebar-item-hover-bg: rgba(0, 0, 0, 0.03);
             --f9xr-sidebar-item-active-bg: rgba(37, 99, 235, 0.1); /* Accent Blue */
             --f9xr-input-bg: var(--f9xr-bg-primary);
             --f9xr-input-border: var(--f9xr-text-muted);
             --f9xr-input-focus-border: var(--f9xr-accent-primary);
             --f9xr-input-focus-shadow: rgba(37, 99, 235, 0.2);
             --f9xr-settings-bg: rgba(255, 255, 255, 0.98);
        }

        /* --- Dark Theme Variables (Default) --- */
        .f9xr-dashboard-container {
            --f9xr-bg-primary: #111827; /* Dark Gray Blue */
            --f9xr-bg-secondary: #1f2937; /* Medium Gray Blue */
            --f9xr-bg-tertiary: #374151; /* Lighter Gray Blue */
            --f9xr-text-primary: #f9fafb; /* Off-white */
            --f9xr-text-secondary: #d1d5db; /* Light Gray */
            --f9xr-text-muted: #9ca3af; /* Medium Gray */
            --f9xr-accent-primary: #60a5fa; /* Lighter Blue */
            --f9xr-accent-secondary: #34d399; /* Lighter Emerald */
            --f9xr-border-color: rgba(255, 255, 255, 0.1);
            --f9xr-card-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --f9xr-card-hover-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
            --f9xr-gradient-bg: linear-gradient(135deg, var(--f9xr-bg-primary) 0%, var(--f9xr-bg-secondary) 100%);
            --f9xr-gradient-header: linear-gradient(to right, rgba(17, 24, 39, 0.7), rgba(31, 41, 55, 0.5));
            --f9xr-gradient-accent: linear-gradient(90deg, var(--f9xr-accent-primary), var(--f9xr-accent-secondary));
            --f9xr-hr-color: linear-gradient(to right, transparent, var(--f9xr-border-color), transparent);
            --f9xr-iframe-bg: var(--f9xr-bg-secondary);
            --f9xr-loader-dot-color: var(--f9xr-accent-primary);
            --f9xr-scrollbar-thumb: var(--f9xr-bg-tertiary);
             --f9xr-scrollbar-thumb-hover: var(--f9xr-text-muted);
             --f9xr-sidebar-bg: rgba(17, 24, 39, 0.85);
             --f9xr-sidebar-item-hover-bg: rgba(255, 255, 255, 0.05);
             --f9xr-sidebar-item-active-bg: rgba(96, 165, 250, 0.1); /* Accent Blue */
             --f9xr-input-bg: var(--f9xr-bg-secondary);
             --f9xr-input-border: var(--f9xr-bg-tertiary);
             --f9xr-input-focus-border: var(--f9xr-accent-primary);
             --f9xr-input-focus-shadow: rgba(96, 165, 250, 0.3);
             --f9xr-settings-bg: rgba(31, 41, 55, 0.98); /* Medium Gray Blue */
        }

        /* Apply base styles */
        .f9xr-dashboard-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            width: 100%;
            background: var(--f9xr-gradient-bg);
            color: var(--f9xr-text-primary);
            overflow: hidden;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            position: relative; /* For settings panel positioning */
             font-family: var(--f9xr-font-family); /* Apply font */
             font-size: var(--f9xr-base-font-size, 1rem); /* Apply font size */
        }


        /* --- Header --- */
        .f9xr-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--f9xr-space-sm) var(--f9xr-space-lg);
            background: var(--f9xr-gradient-header);
            border-bottom: var(--f9xr-border-width) solid var(--f9xr-border-color);
            flex-shrink: 0;
            gap: var(--f9xr-space-md);
        }
        .f9xr-header-left {
            display: flex;
            align-items: center;
            gap: var(--f9xr-space-md);
        }
        .f9xr-header-logo {
            font-size: 1.4rem; /* Slightly smaller */
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: var(--f9xr-space-xs);
            color: var(--f9xr-text-primary);
            text-decoration: none;
            flex-shrink: 0;
        }
        .f9xr-header-logo i {
            color: var(--f9xr-accent-primary);
            font-size: 1.3rem;
        }
        /* Search Bar in Header */
        .f9xr-header-search {
            position: relative;
            flex-grow: 1; /* Allow shrinking/growing */
            max-width: 400px; /* Limit max width */
        }
        .f9xr-header-search-input {
            width: 100%;
            padding: var(--f9xr-space-xs) var(--f9xr-space-md) var(--f9xr-space-xs) calc(var(--f9xr-space-xs) * 4); /* Space for icon */
            border-radius: var(--f9xr-border-radius-md);
            border: var(--f9xr-border-width) solid var(--f9xr-input-border);
            background-color: var(--f9xr-input-bg);
            color: var(--f9xr-text-primary);
            font-size: 0.9rem;
            transition: all var(--f9xr-transition-fast);
        }
        .f9xr-header-search-input:focus {
            outline: none;
            border-color: var(--f9xr-input-focus-border);
            box-shadow: 0 0 0 3px var(--f9xr-input-focus-shadow);
        }
        .f9xr-header-search i {
            position: absolute;
            left: var(--f9xr-space-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--f9xr-text-muted);
            font-size: 0.9rem;
            pointer-events: none; /* Prevent icon interaction */
        }

        .f9xr-header-right {
            display: flex;
            align-items: center;
            gap: var(--f9xr-space-md);
        }
        .f9xr-settings-toggle-btn, .f9xr-nav-toggle {
            background: none; border: none;
            color: var(--f9xr-text-secondary);
            font-size: 1.4rem; cursor: pointer;
            padding: var(--f9xr-space-xxs);
            transition: color var(--f9xr-transition-fast);
        }
        .f9xr-settings-toggle-btn:hover, .f9xr-nav-toggle:hover { color: var(--f9xr-text-primary); }
        .f9xr-nav-toggle { display: none; } /* Hidden by default */

        /* --- Main Content Area --- */
        .f9xr-main-content {
            display: flex;
            flex-grow: 1;
            overflow: hidden;
            position: relative; /* For resizer */
        }

        /* --- Sidebar --- */
        .f9xr-sidebar {
            width: var(--f9xr-sidebar-width); /* Controlled by JS */
            background: var(--f9xr-sidebar-bg);
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
            padding: var(--f9xr-space-lg) 0; /* No horizontal padding initially */
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Prevent scrollbars during transition/resize */
            transition: width var(--f9xr-transition-medium), transform var(--f9xr-transition-medium);
            border-right: var(--f9xr-border-width) solid var(--f9xr-border-color);
            flex-shrink: 0;
            position: relative; /* For collapse button */
        }
        .f9xr-sidebar-inner { /* Added inner container for padding and scroll */
             padding: 0 var(--f9xr-space-md);
             overflow-y: auto;
             overflow-x: hidden;
             height: 100%;
             display: flex;
             flex-direction: column;
             gap: var(--f9xr-space-md);
         }

        /* Sidebar Scrollbar */
        .f9xr-sidebar-inner::-webkit-scrollbar { width: 6px; }
        .f9xr-sidebar-inner::-webkit-scrollbar-track { background: transparent; }
        .f9xr-sidebar-inner::-webkit-scrollbar-thumb { background: var(--f9xr-scrollbar-thumb); border-radius: 3px; }
        .f9xr-sidebar-inner::-webkit-scrollbar-thumb:hover { background: var(--f9xr-scrollbar-thumb-hover); }

        .f9xr-sidebar-section-title {
            font-size: 0.75rem; font-weight: 600; color: var(--f9xr-text-muted);
            padding: 0 var(--f9xr-space-xs) var(--f9xr-space-xs) var(--f9xr-space-xs);
            margin-top: var(--f9xr-space-lg); margin-bottom: var(--f9xr-space-xs);
            border-bottom: var(--f9xr-border-width) solid var(--f9xr-border-color);
            text-transform: uppercase; letter-spacing: 0.8px;
            white-space: nowrap; /* Keep title on one line */
        }
        .f9xr-sidebar-section-title:first-of-type { margin-top: 0;} /* No top margin for first title */


        /* Sidebar Navigation Link (Dashboard Section Link) */
        .f9xr-sidebar-nav-link {
            display: flex; align-items: center;
            gap: var(--f9xr-space-md);
            padding: var(--f9xr-sidebar-item-vertical-padding) var(--f9xr-space-md);
            border-radius: var(--f9xr-border-radius-sm);
            cursor: pointer; transition: all var(--f9xr-transition-fast);
            font-size: 0.95rem; color: var(--f9xr-text-secondary);
            text-decoration: none; white-space: nowrap;
            overflow: hidden; /* Hide text when collapsed */
        }
        .f9xr-sidebar-nav-link:hover { background-color: var(--f9xr-sidebar-item-hover-bg); color: var(--f9xr-text-primary); }
        .f9xr-sidebar-nav-link.f9xr-active-section {
            background-color: var(--f9xr-sidebar-item-active-bg);
            color: var(--f9xr-accent-primary); font-weight: 600;
        }
        .f9xr-sidebar-nav-link i {
             width: 20px; /* Fixed width for icon alignment */
             text-align: center;
             flex-shrink: 0; /* Prevent icon shrinking */
             font-size: 1.1em;
             transition: color var(--f9xr-transition-fast);
             color: var(--f9xr-text-muted);
         }
         .f9xr-sidebar-nav-link:hover i,
         .f9xr-sidebar-nav-link.f9xr-active-section i { color: var(--f9xr-accent-primary); }
         .f9xr-sidebar-nav-link .f9xr-link-text {
            opacity: 1; transition: opacity var(--f9xr-transition-fast) ease;
            margin-left: var(--f9xr-space-xs);
         }


        /* Filter Controls - Collapsible */
        .f9xr-filter-container { margin-bottom: var(--f9xr-space-md); }
        .f9xr-filter-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: var(--f9xr-space-sm) var(--f9xr-space-xs); /* Less horizontal padding */
            cursor: pointer; border-radius: var(--f9xr-border-radius-sm);
            transition: background-color var(--f9xr-transition-fast);
            margin-bottom: var(--f9xr-space-xs);
        }
        .f9xr-filter-header:hover { background-color: var(--f9xr-sidebar-item-hover-bg); }
        .f9xr-filter-title {
            font-size: 0.9rem; font-weight: 500; color: var(--f9xr-text-secondary);
            display: flex; align-items: center; gap: var(--f9xr-space-sm);
             white-space: nowrap;
        }
        .f9xr-filter-toggle-icon {
            transition: transform var(--f9xr-transition-medium); font-size: 0.8rem; color: var(--f9xr-text-muted);
        }
        .f9xr-filter-container.f9xr-collapsed .f9xr-filter-toggle-icon { transform: rotate(-90deg); }
        .f9xr-filter-categories {
            display: flex; flex-direction: column; gap: var(--f9xr-space-xxs);
            max-height: 200px; /* Initial height for transition */
            overflow-y: auto; padding: 0 var(--f9xr-space-xs) 0 var(--f9xr-space-sm); /* Indent slightly */
            transition: max-height var(--f9xr-transition-medium) ease-in-out, padding var(--f9xr-transition-medium) ease-in-out;
        }
        .f9xr-filter-container.f9xr-collapsed .f9xr-filter-categories { max-height: 0; padding-top: 0; padding-bottom: 0; overflow: hidden; }
        /* Filter Scrollbar */
        .f9xr-filter-categories::-webkit-scrollbar { width: 4px; }
        .f9xr-filter-categories::-webkit-scrollbar-track { background: transparent; }
        .f9xr-filter-categories::-webkit-scrollbar-thumb { background: var(--f9xr-scrollbar-thumb); border-radius: 2px; }
        .f9xr-filter-categories::-webkit-scrollbar-thumb:hover { background: var(--f9xr-scrollbar-thumb-hover); }

        .f9xr-category-filter-item label {
            display: flex; align-items: center; cursor: pointer;
            padding: var(--f9xr-space-xs) var(--f9xr-space-sm); /* Consistent padding */
            border-radius: var(--f9xr-border-radius-sm);
            transition: background-color var(--f9xr-transition-fast);
            font-size: 0.85rem; color: var(--f9xr-text-secondary); gap: var(--f9xr-space-sm);
             white-space: nowrap;
        }
         /* Checkbox Styling (slightly improved) */
         .f9xr-category-filter-item input[type="checkbox"] {
           appearance: none; -webkit-appearance: none;
           width: 16px; height: 16px; border: 1.5px solid var(--f9xr-text-muted);
           border-radius: var(--f9xr-border-radius-sm); cursor: pointer; position: relative; flex-shrink: 0;
           background-color: transparent; transition: all var(--f9xr-transition-fast);
           display: grid; place-content: center; /* For checkmark centering */
        }
        .f9xr-category-filter-item input[type="checkbox"]::before { /* Checkmark */
            content: ''; width: 9px; height: 9px; background-color: var(--f9xr-bg-primary); /* Checkmark color */
            transform: scale(0); transition: transform 120ms ease-in-out;
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }
        .f9xr-category-filter-item input[type="checkbox"]:checked {
            background-color: var(--f9xr-accent-primary); border-color: var(--f9xr-accent-primary);
        }
        .f9xr-category-filter-item input[type="checkbox"]:checked::before { transform: scale(1); }
        .f9xr-category-filter-item label:hover { background-color: var(--f9xr-sidebar-item-hover-bg); }

        .f9xr-reset-button {
            display: flex; align-items: center; justify-content: center; gap: var(--f9xr-space-xs); width: 100%;
            padding: var(--f9xr-space-sm); margin-top: var(--f9xr-space-md);
            border: var(--f9xr-border-width) solid var(--f9xr-tertiary);
            background: transparent; color: var(--f9xr-text-muted);
            border-radius: var(--f9xr-border-radius-sm); cursor: pointer;
            transition: all var(--f9xr-transition-fast); font-size: 0.9rem;
            white-space: nowrap;
        }
        .f9xr-reset-button:hover { background-color: var(--f9xr-sidebar-item-hover-bg); color: var(--f9xr-text-secondary); border-color: var(--f9xr-text-muted); }
        .f9xr-reset-button i { margin-right: var(--f9xr-space-xs); }


        /* --- Project List --- */
        .f9xr-project-list { flex-grow: 1; overflow-y: auto; overflow-x: hidden; padding-right: var(--f9xr-space-xxs); } /* Add padding for scrollbar */
        /* Scrollbar */
        .f9xr-project-list::-webkit-scrollbar { width: 4px; }
        .f9xr-project-list::-webkit-scrollbar-track { background: transparent; }
        .f9xr-project-list::-webkit-scrollbar-thumb { background: var(--f9xr-scrollbar-thumb); border-radius: 2px; }
        .f9xr-project-list::-webkit-scrollbar-thumb:hover { background: var(--f9xr-scrollbar-thumb-hover); }

        .f9xr-category-container { margin-bottom: var(--f9xr-space-xs); }
        .f9xr-category-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: var(--f9xr-space-sm) var(--f9xr-space-xs); cursor: pointer;
            border-radius: var(--f9xr-border-radius-sm);
            transition: background-color var(--f9xr-transition-fast);
            margin-bottom: var(--f9xr-space-xxs);
             white-space: nowrap;
        }
        .f9xr-category-header:hover { background-color: var(--f9xr-sidebar-item-hover-bg); }
        .f9xr-category-title {
            font-weight: 500; font-size: 0.9rem; color: var(--f9xr-text-secondary);
            display: flex; align-items: center; gap: var(--f9xr-space-sm);
            overflow: hidden; text-overflow: ellipsis; /* Prevent long titles breaking layout */
        }
         .f9xr-category-title i { color: var(--f9xr-text-muted); font-size: 0.85rem; flex-shrink: 0; }
        .f9xr-category-toggle-icon { transition: transform var(--f9xr-transition-medium); font-size: 0.8rem; color: var(--f9xr-text-muted); flex-shrink: 0; }
        .f9xr-category-header.f9xr-collapsed .f9xr-category-toggle-icon { transform: rotate(-90deg); }
        .f9xr-category-projects {
            padding-left: var(--f9xr-space-md); /* Indent projects */
            max-height: 500px; overflow: hidden;
            transition: max-height var(--f9xr-transition-slow) ease-in-out;
        }
        .f9xr-category-projects.f9xr-collapsed { max-height: 0; }

        .f9xr-project-item {
            display: block;
            padding: var(--f9xr-sidebar-item-vertical-padding) var(--f9xr-space-md); /* Use variable */
            margin-bottom: var(--f9xr-space-xxs);
            border-radius: var(--f9xr-border-radius-sm); cursor: pointer;
            transition: all var(--f9xr-transition-fast); font-size: 0.9rem;
            color: var(--f9xr-text-secondary); background-color: transparent;
            white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
        }
        .f9xr-project-item:hover {
            background-color: var(--f9xr-sidebar-item-hover-bg); color: var(--f9xr-text-primary);
            transform: translateX(4px);
        }
        .f9xr-project-item.f9xr-active-project {
            background-color: var(--f9xr-sidebar-item-active-bg);
            color: var(--f9xr-accent-primary); font-weight: 500;
        }
        .f9xr-project-item.f9xr-highlight { background-color: rgba(96, 165, 250, 0.15); } /* Accent highlight */

         /* --- Sidebar Collapse Button --- */
         .f9xr-sidebar-collapse-btn {
             position: absolute;
             bottom: var(--f9xr-space-md);
             right: var(--f9xr-space-md);
             transform: translateX(50%); /* Position halfway over the edge */
             background-color: var(--f9xr-bg-tertiary);
             color: var(--f9xr-text-muted);
             border: var(--f9xr-border-width) solid var(--f9xr-border-color);
             border-radius: 50%;
             width: 30px;
             height: 30px;
             display: flex;
             align-items: center;
             justify-content: center;
             cursor: pointer;
             z-index: 10;
             transition: all var(--f9xr-transition-medium);
             box-shadow: 0 2px 5px rgba(0,0,0,0.1);
         }
          .f9xr-sidebar-collapse-btn:hover {
             background-color: var(--f9xr-accent-primary);
             color: var(--f9xr-bg-primary);
             border-color: var(--f9xr-accent-primary);
             transform: translateX(50%) scale(1.1);
         }
         .f9xr-sidebar-collapse-btn i { transition: transform var(--f9xr-transition-medium); font-size: 0.9rem; }


        /* --- Sidebar Collapsed State --- */
        .f9xr-sidebar.f9xr-sidebar-collapsed {
            width: var(--f9xr-sidebar-collapsed-width);
        }
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-inner {
             padding: 0 var(--f9xr-space-sm); /* Adjust padding when collapsed */
             align-items: center; /* Center icons */
         }
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-section-title,
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-link-text,
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-filter-title span,
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-filter-toggle-icon, /* Hide filter arrow */
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-category-title span,
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-category-toggle-icon,
        .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-reset-button span,
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-category-filter-item label span, /* Hide filter text */
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-project-item {
            opacity: 0;
            width: 0; /* Collapse width */
            overflow: hidden;
            display: none; /* Ensure it doesn't take space */
        }
         /* Keep icons visible and centered */
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-nav-link,
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-filter-header,
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-category-header,
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-reset-button {
             justify-content: center;
             padding: var(--f9xr-sidebar-item-vertical-padding) var(--f9xr-space-xs); /* Adjust padding */
         }
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-filter-header { cursor: default; } /* Disable toggle */
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-filter-categories { max-height: 0; padding: 0; } /* Keep filters hidden */

         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-collapse-btn {
            right: 50%; /* Center the button when collapsed */
             transform: translateX(50%); /* Keep centered */
         }
         .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-collapse-btn i { transform: rotate(180deg); }


        /* --- Resizer Handle --- */
        .f9xr-resizer {
            width: 5px;
            background-color: transparent; /* Make it invisible */
            cursor: col-resize;
            flex-shrink: 0;
            position: relative;
            z-index: 5; /* Above sidebar/main */
            transition: background-color var(--f9xr-transition-fast);
        }
        .f9xr-resizer:hover, .f9xr-resizer.f9xr-resizing {
             background-color: var(--f9xr-accent-primary); /* Show on hover/drag */
        }
        .f9xr-resizer::before { /* Larger invisible grab area */
             content: '';
             position: absolute;
             top: 0;
             bottom: 0;
             left: -5px;
             width: 15px; /* Make grab area wider */
             cursor: col-resize;
         }


        /* --- Main View Area --- */
        .f9xr-main-view {
            flex-grow: 1;
            background: var(--f9xr-bg-primary);
            overflow-y: auto; overflow-x: hidden;
            padding: var(--f9xr-space-xl);
            position: relative; /* For loader positioning */
        }
         /* Scrollbar */
        .f9xr-main-view::-webkit-scrollbar { width: 8px; }
        .f9xr-main-view::-webkit-scrollbar-track { background: transparent; }
        .f9xr-main-view::-webkit-scrollbar-thumb { background: var(--f9xr-scrollbar-thumb); border-radius: 4px; }
        .f9xr-main-view::-webkit-scrollbar-thumb:hover { background: var(--f9xr-scrollbar-thumb-hover); }


        /* --- Content Section & Cards --- */
        .f9xr-content-section { margin-bottom: var(--f9xr-space-xxl); }
        .f9xr-dashboard-header {
            margin-bottom: var(--f9xr-space-xl);
            padding-bottom: var(--f9xr-space-md);
             border-bottom: 1px solid var(--f9xr-border-color);
        }
         .f9xr-dashboard-header h1 {
             font-size: 2.2rem;
             font-weight: 700;
             color: var(--f9xr-text-primary);
             display: flex;
             align-items: center;
             gap: var(--f9xr-space-md);
         }
         .f9xr-dashboard-header h1 i { color: var(--f9xr-accent-primary); }
         .f9xr-dashboard-header p {
             color: var(--f9xr-text-muted);
             font-size: 1rem;
             margin-top: var(--f9xr-space-xs);
         }

        .f9xr-grid-container { /* For laying out cards */
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
             gap: var(--f9xr-space-lg);
         }
         .f9xr-section-subheader { /* Subheaders within dashboard section */
             font-size: 1.5rem;
             font-weight: 600;
             color: var(--f9xr-text-primary);
             margin-top: var(--f9xr-space-xl);
             margin-bottom: var(--f9xr-space-lg);
             display: flex;
             align-items: center;
             gap: var(--f9xr-space-sm);
         }
         .f9xr-section-subheader i { color: var(--f9xr-accent-secondary); font-size: 1.2rem;}

        .f9xr-card {
            background-color: var(--f9xr-bg-secondary);
            border-radius: var(--f9xr-border-radius-lg); /* Larger radius */
            padding: var(--f9xr-space-lg);
            box-shadow: var(--f9xr-card-shadow);
            border: var(--f9xr-border-width) solid var(--f9xr-border-color);
            transition: transform var(--f9xr-transition-medium), box-shadow var(--f9xr-transition-medium);
            /* 3D effect preparation */
            transform-style: preserve-3d;
        }
        .f9xr-card:hover {
            /* Subtle 3D Rotate Effect */
            transform: perspective(1000px) rotateY(var(--f9xr-rotate-y, 1deg)) rotateX(var(--f9xr-rotate-x, 2deg)) translateY(-5px) translateZ(10px);
            box-shadow: var(--f9xr-card-hover-shadow);
        }
        .f9xr-card h3 {
            font-size: 1.1rem; color: var(--f9xr-text-primary); margin-bottom: var(--f9xr-space-sm);
            display: flex; align-items: center; gap: var(--f9xr-space-sm);
        }
         .f9xr-card h3 i { color: var(--f9xr-accent-secondary); font-size: 1.1rem;}

        .f9xr-card p, .f9xr-card li { color: var(--f9xr-text-secondary); margin-bottom: var(--f9xr-space-sm); line-height: 1.7; }
        .f9xr-card ul { list-style: none; padding-left: 0; }
        .f9xr-card li { padding-left: 1.8em; position: relative; }
        .f9xr-card li::before {
            content: "\f00c"; /* FA Check */
            font-family: "Font Awesome 6 Free"; font-weight: 900;
            position: absolute; left: 0; top: 5px; color: var(--f9xr-accent-secondary); font-size: 0.9em;
        }
        .f9xr-card strong { color: var(--f9xr-text-primary); font-weight: 600; }

        /* Stats Cards Specific Styles */
        .f9xr-stat-card { text-align: center; padding: var(--f9xr-space-xl) var(--f9xr-space-lg); }
        .f9xr-stat-icon { font-size: 2.5rem; color: var(--f9xr-accent-primary); margin-bottom: var(--f9xr-space-md); display: block; }
        .f9xr-stat-number { font-size: 2.5rem; font-weight: 700; color: var(--f9xr-text-primary); margin-bottom: var(--f9xr-space-xs); line-height: 1.1; }
        .f9xr-stat-label { font-size: 0.8rem; color: var(--f9xr-text-muted); text-transform: uppercase; letter-spacing: 0.5px; }

         /* Review Card Specific Styles */
         .f9xr-review-card { border-left: 4px solid var(--f9xr-accent-secondary); }
         .f9xr-review-author { font-weight: 600; color: var(--f9xr-text-primary); margin-top: var(--f9xr-space-md); display: block; }
         .f9xr-review-stars { color: #facc15; margin-bottom: var(--f9xr-space-sm); }

          /* FAQ Item Specific Styles */
          .f9xr-faq-item { border: var(--f9xr-border-width) solid var(--f9xr-border-color); border-radius: var(--f9xr-border-radius-sm); margin-bottom: var(--f9xr-space-sm); overflow: hidden; background-color: var(--f9xr-bg-secondary); }
          .f9xr-faq-question { display: flex; justify-content: space-between; align-items: center; padding: var(--f9xr-space-md) var(--f9xr-space-lg); cursor: pointer; background-color: var(--f9xr-bg-tertiary); transition: background-color var(--f9xr-transition-fast); font-weight: 500; color: var(--f9xr-text-primary); }
          .f9xr-faq-question:hover { background-color: var(--f9xr-sidebar-item-hover-bg); }
          .f9xr-faq-toggle-icon { transition: transform var(--f9xr-transition-medium); color: var(--f9xr-text-muted); }
          .f9xr-faq-item.f9xr-active .f9xr-faq-toggle-icon { transform: rotate(180deg); color: var(--f9xr-accent-primary); }
          .f9xr-faq-answer { padding: 0 var(--f9xr-space-lg); max-height: 0; overflow: hidden; transition: max-height var(--f9xr-transition-medium) ease-out, padding var(--f9xr-transition-medium) ease-out; color: var(--f9xr-text-secondary); }
          .f9xr-faq-answer p { margin-top: var(--f9xr-space-md); margin-bottom: var(--f9xr-space-md); }
          .f9xr-faq-item.f9xr-active .f9xr-faq-answer { max-height: 300px; padding-top: var(--f9xr-space-sm); padding-bottom: var(--f9xr-space-lg); transition: max-height 0.4s ease-in-out, padding var(--f9xr-transition-medium) ease-in-out; }

        /* --- Iframe Area & Loader --- */
        .f9xr-iframe-wrapper {
            flex-grow: 1; width: 100%; height: 100%; position: relative;
            display: flex; flex-direction: column; background-color: var(--f9xr-iframe-bg);
            border-radius: var(--f9xr-border-radius-lg); overflow: hidden;
        }
        .f9xr-iframe-loader {
            position: absolute; inset: 0; background: var(--f9xr-iframe-bg);
            display: flex; justify-content: center; align-items: center;
            z-index: 10; flex-direction: column; gap: var(--f9xr-space-md);
            color: var(--f9xr-text-secondary);
            transition: opacity var(--f9xr-transition-medium) ease var(--f9xr-transition-fast), visibility var(--f9xr-transition-medium) ease var(--f9xr-transition-fast); /* Delay fade out */
            opacity: 1; visibility: visible;
        }
        .f9xr-iframe-loader.f9xr-hidden { opacity: 0; visibility: hidden; transition-delay: 0s; }
        /* Enhanced Loader: Pulsing Dots */
        .f9xr-loader-dots { display: flex; gap: var(--f9xr-space-sm); }
        .f9xr-loader-dots div {
            width: 12px; height: 12px;
            background-color: var(--f9xr-loader-dot-color);
            border-radius: 50%;
            animation: f9xr-pulse 1.4s infinite ease-in-out both;
        }
        .f9xr-loader-dots div:nth-child(1) { animation-delay: -0.32s; }
        .f9xr-loader-dots div:nth-child(2) { animation-delay: -0.16s; }
        @keyframes f9xr-pulse {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }

        .f9xr-iframe { width: 100%; height: 100%; border: none; display: block; flex-grow: 1; }

        /* --- Custom HR --- */
        .f9xr-hr {
             height: 1px;
             border: none;
             background: var(--f9xr-hr-color);
             margin: var(--f9xr-space-lg) 0;
        }

        /* --- Settings Panel --- */
        .f9xr-settings-panel {
            position: fixed; /* Changed to fixed for overlay effect */
            top: 0; right: 0; bottom: 0; /* Full height on right */
            width: 320px;
            background-color: var(--f9xr-settings-bg);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-left: var(--f9xr-border-width) solid var(--f9xr-border-color);
            box-shadow: -5px 0 20px rgba(0,0,0,0.1);
            z-index: 1010; /* Above overlay */
            transform: translateX(100%);
            transition: transform var(--f9xr-transition-medium) ease-in-out;
            display: flex;
            flex-direction: column;
        }
        .f9xr-settings-panel.f9xr-settings-visible { transform: translateX(0); }

        .f9xr-settings-header {
            display: flex; justify-content: space-between; align-items: center;
            padding: var(--f9xr-space-md) var(--f9xr-space-lg);
            border-bottom: var(--f9xr-border-width) solid var(--f9xr-border-color);
            flex-shrink: 0;
        }
        .f9xr-settings-header h3 { font-size: 1.2rem; color: var(--f9xr-text-primary); margin: 0; display: flex; align-items: center; gap: var(--f9xr-space-sm);}
        .f9xr-settings-close-btn { background: none; border: none; font-size: 1.5rem; color: var(--f9xr-text-muted); cursor: pointer; transition: color var(--f9xr-transition-fast); padding: var(--f9xr-space-xs); }
        .f9xr-settings-close-btn:hover { color: var(--f9xr-text-primary); }

        .f9xr-settings-content {
             padding: var(--f9xr-space-lg);
             overflow-y: auto;
             flex-grow: 1;
             display: flex;
             flex-direction: column;
             gap: var(--f9xr-space-xl);
         }
         /* Settings Scrollbar */
        .f9xr-settings-content::-webkit-scrollbar { width: 6px; }
        .f9xr-settings-content::-webkit-scrollbar-track { background: transparent; }
        .f9xr-settings-content::-webkit-scrollbar-thumb { background: var(--f9xr-scrollbar-thumb); border-radius: 3px; }
        .f9xr-settings-content::-webkit-scrollbar-thumb:hover { background: var(--f9xr-scrollbar-thumb-hover); }

         .f9xr-setting-group { display: flex; flex-direction: column; gap: var(--f9xr-space-sm); }
         .f9xr-setting-group label { font-weight: 500; color: var(--f9xr-text-secondary); font-size: 0.9rem; margin-bottom: var(--f9xr-space-xxs); }
         .f9xr-setting-group select, .f9xr-setting-group input[type="range"] {
             width: 100%; padding: var(--f9xr-space-sm); border-radius: var(--f9xr-border-radius-sm);
             border: var(--f9xr-border-width) solid var(--f9xr-input-border);
             background-color: var(--f9xr-input-bg); color: var(--f9xr-text-primary);
             font-size: 0.9rem; transition: border-color var(--f9xr-transition-fast);
             cursor: pointer;
         }
         .f9xr-setting-group select:focus, .f9xr-setting-group input:focus {
            outline: none; border-color: var(--f9xr-input-focus-border);
            box-shadow: 0 0 0 3px var(--f9xr-input-focus-shadow);
         }
         /* Theme Radio Buttons */
         .f9xr-theme-options { display: flex; gap: var(--f9xr-space-md); }
         .f9xr-theme-options label {
             display: flex; flex-direction: column; align-items: center; gap: var(--f9xr-space-xs);
             cursor: pointer; padding: var(--f9xr-space-sm); border-radius: var(--f9xr-border-radius-md);
             border: 2px solid transparent; transition: all var(--f9xr-transition-fast);
             background-color: var(--f9xr-bg-tertiary); flex: 1;
         }
          .f9xr-theme-options input[type="radio"] { appearance: none; -webkit-appearance: none; position: absolute; opacity: 0; }
          .f9xr-theme-options label .f9xr-theme-icon { font-size: 1.5rem; color: var(--f9xr-text-secondary); }
          .f9xr-theme-options label span { font-size: 0.8rem; color: var(--f9xr-text-muted); }
          .f9xr-theme-options input[type="radio"]:checked + label {
             border-color: var(--f9xr-accent-primary); background-color: var(--f9xr-sidebar-item-active-bg);
          }
         .f9xr-theme-options input[type="radio"]:checked + label .f9xr-theme-icon,
         .f9xr-theme-options input[type="radio"]:checked + label span { color: var(--f9xr-accent-primary); }
          .f9xr-theme-options label:hover { background-color: var(--f9xr-sidebar-item-hover-bg); }

          /* Font size display */
          .f9xr-font-size-display { text-align: right; font-size: 0.8rem; color: var(--f9xr-text-muted); }

          /* Sidebar Spacing */
           .f9xr-spacing-options { display: flex; justify-content: space-between; }
           .f9xr-spacing-options button {
               background-color: var(--f9xr-bg-tertiary); border: 1px solid var(--f9xr-border-color);
               color: var(--f9xr-text-secondary); padding: var(--f9xr-space-xs) var(--f9xr-space-sm);
               border-radius: var(--f9xr-border-radius-sm); cursor: pointer; font-size: 0.8rem;
               transition: all var(--f9xr-transition-fast);
           }
           .f9xr-spacing-options button:hover { background-color: var(--f9xr-sidebar-item-hover-bg); color: var(--f9xr-text-primary);}
            .f9xr-spacing-options button.f9xr-active {
                 background-color: var(--f9xr-accent-primary); color: var(--f9xr-bg-primary); border-color: var(--f9xr-accent-primary);
            }

         .f9xr-settings-footer {
             padding: var(--f9xr-space-md) var(--f9xr-space-lg); margin-top: auto; /* Push to bottom */
             border-top: var(--f9xr-border-width) solid var(--f9xr-border-color);
             flex-shrink: 0; display: flex; flex-direction: column; gap: var(--f9xr-space-sm);
         }
         .f9xr-settings-footer a {
             color: var(--f9xr-text-muted); text-decoration: none; font-size: 0.85rem;
             transition: color var(--f9xr-transition-fast); display: flex; align-items: center; gap: var(--f9xr-space-sm);
         }
         .f9xr-settings-footer a:hover { color: var(--f9xr-accent-primary); }
         .f9xr-settings-footer a i { width: 16px; text-align: center; }


        /* --- Settings Overlay --- */
        .f9xr-settings-overlay {
             position: fixed; inset: 0;
             background-color: rgba(0, 0, 0, 0.5);
             z-index: 1005; /* Below settings panel, above content */
             opacity: 0; visibility: hidden;
             transition: opacity var(--f9xr-transition-medium), visibility var(--f9xr-transition-medium);
         }
         .f9xr-settings-overlay.f9xr-settings-visible { opacity: 1; visibility: visible; }


        /* --- Helper Classes --- */
        .f9xr-hidden { display: none !important; }

        /* --- Responsiveness --- */
        @media (max-width: 992px) {
            .f9xr-header-search { max-width: 300px; }
             .f9xr-grid-container { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
             .f9xr-stat-number { font-size: 2rem; }
             .f9xr-stat-icon { font-size: 2rem; }
        }

        @media (max-width: 768px) {
            html { font-size: 15px; }
            .f9xr-main-content { flex-direction: column; position: relative; } /* Keep relative for mobile overlay */
            .f9xr-nav-toggle { display: block; } /* Show hamburger */
            .f9xr-settings-toggle-btn { font-size: 1.2rem; } /* Slightly smaller */
            /* Hide desktop collapse/resize */
            .f9xr-sidebar-collapse-btn { display: none; }
            .f9xr-resizer { display: none; }

            .f9xr-sidebar {
                position: fixed; /* Use fixed for mobile overlay */
                left: 0; top: 0; bottom: 0; height: 100%;
                width: 280px !important; /* Override resizable width */
                transform: translateX(-100%);
                z-index: 1000; /* Below settings panel but above overlay */
                transition: transform var(--f9xr-transition-medium);
                border-right: var(--f9xr-border-width) solid var(--f9xr-border-color);
                /* Don't force collapse style on mobile */
                /* background: var(--f9xr-sidebar-bg); */ /* Already set */
                 box-shadow: 5px 0 15px rgba(0,0,0,0.1);
            }
            .f9xr-sidebar.f9xr-sidebar-visible { transform: translateX(0); }
             /* Remove collapsed styles if applied on desktop */
             .f9xr-sidebar.f9xr-sidebar-collapsed { width: 280px !important; }
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-inner,
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-nav-link,
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-filter-header,
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-category-header,
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-reset-button { justify-content: flex-start; padding: initial; } /* Reset justifications */
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-sidebar-section-title,
             .f9xr-sidebar.f9xr-sidebar-collapsed .f9xr-link-text,
             /* ...etc - reset all hidden elements */
              .f9xr-sidebar.f9xr-sidebar-collapsed * { opacity: 1; width: auto; display: initial; }


            .f9xr-main-view { width: 100%; padding: var(--f9xr-space-lg); }
            .f9xr-dashboard-header h1 { font-size: 1.8rem; }
            .f9xr-card { padding: var(--f9xr-space-lg); }

             /* Mobile Nav Overlay */
            .f9xr-mobile-nav-overlay {
                 position: fixed; inset: 0; background: rgba(0, 0, 0, 0.5);
                 z-index: 999; /* Below sidebar */
                 opacity: 0; visibility: hidden;
                 transition: opacity var(--f9xr-transition-medium), visibility var(--f9xr-transition-medium);
             }
             .f9xr-mobile-nav-overlay.f9xr-overlay-visible { opacity: 1; visibility: visible; }

             /* Settings Panel on Mobile */
             .f9xr-settings-panel { width: 90%; max-width: 320px; } /* Slightly narrower */
        }
         @media (max-width: 480px) {
            html { font-size: 14px; }
            .f9xr-main-view { padding: var(--f9xr-space-md); }
            .f9xr-header { padding: var(--f9xr-space-sm) var(--f9xr-space-md); gap: var(--f9xr-space-sm); }
            .f9xr-header-logo { font-size: 1.2rem; }
            .f9xr-header-logo i { font-size: 1.1rem;}
            .f9xr-header-search { display: none; } /* Hide search in header on smallest screens */
            .f9xr-grid-container { grid-template-columns: 1fr; } /* Stack cards */
            .f9xr-dashboard-header h1 { font-size: 1.6rem; }
            .f9xr-settings-toggle-btn, .f9xr-nav-toggle { font-size: 1.1rem; }
         }

    </style>
</head>
<body itemscope itemtype="https://schema.org/WebPage">

<div class="f9xr-dashboard-container" id="f9xr-dashboard-container">
    <header class="f9xr-header">
        <div class="f9xr-header-left">
            <button class="f9xr-nav-toggle" id="f9xr-nav-toggle-btn" aria-label="Toggle Navigation Menu">
                <i class="fas fa-bars"></i>
            </button>
            <a href="#" class="f9xr-header-logo" id="f9xr-logo-link" itemprop="url">
                <i class="fas fa-rocket"></i>
                <span itemprop="name">F9XR Dashboard</span>
            </a>
        </div>

        <div class="f9xr-header-search">
            <i class="fas fa-search"></i>
            <input type="text" id="f9xr-header-search-input" class="f9xr-header-search-input" placeholder="Search projects...">
        </div>

        <div class="f9xr-header-right">
            <button class="f9xr-settings-toggle-btn" id="f9xr-settings-toggle-btn" aria-label="Open Settings">
                <i class="fas fa-cog"></i>
            </button>
        </div>
    </header>

    <div class="f9xr-main-content" id="f9xr-main-content">
        <aside class="f9xr-sidebar" id="f9xr-sidebar" itemscope itemtype="https://schema.org/SiteNavigationElement">
            <div class="f9xr-sidebar-inner">
                <!-- Dashboard Section Link -->
                <div class="f9xr-sidebar-nav">
                    <a class="f9xr-sidebar-nav-link f9xr-active-section" data-section="f9xr-dashboard-section" itemprop="url">
                        <i class="fas fa-tachometer-alt"></i> <span class="f9xr-link-text" itemprop="name">Dashboard</span>
                    </a>
                </div>

                 <!-- Project Navigation -->
                 <div class="f9xr-sidebar-section-title">Projects</div>

                <!-- Filters -->
                 <div class="f9xr-filter-container" id="f9xr-filter-container">
                     <div class="f9xr-filter-header" id="f9xr-filter-header">
                         <h4 class="f9xr-filter-title"><i class="fas fa-filter"></i> <span>Filter by Category</span></h4>
                         <i class="fas fa-chevron-down f9xr-filter-toggle-icon"></i>
                     </div>
                     <div class="f9xr-filter-categories" id="f9xr-filter-categories">
                         <!-- Category filters populated here -->
                     </div>
                 </div>

                <button class="f9xr-reset-button" id="f9xr-reset-button">
                    <i class="fas fa-undo"></i> <span>Reset Filters</span>
                </button>

                <!-- Project List -->
                <div class="f9xr-project-list" id="f9xr-project-list" itemscope itemtype="https://schema.org/ItemList">
                    <!-- Project list populated here -->
                     <!-- Example list item structure for schema:
                     <div class="f9xr-category-container" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                         <meta itemprop="position" content="1" /> ...
                         <div class="f9xr-project-item" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
                            <meta itemprop="position" content="1.1" />
                            <span itemprop="name">Project Name</span>
                            <link itemprop="url" href="project-url" />
                         </div>
                     </div>
                     -->
                </div>

            </div> <!-- End sidebar-inner -->

            <button class="f9xr-sidebar-collapse-btn" id="f9xr-sidebar-collapse-btn" aria-label="Collapse Sidebar">
                <i class="fas fa-chevron-left"></i>
            </button>

        </aside>

        <div class="f9xr-resizer" id="f9xr-resizer"></div>

        <main class="f9xr-main-view" id="f9xr-main-view" itemprop="mainContentOfPage">

            <!-- Consolidated Dashboard Section -->
            <section class="f9xr-content-section" id="f9xr-dashboard-section">
                 <header class="f9xr-dashboard-header">
                     <h1><i class="fas fa-shapes"></i> Dashboard Overview</h1>
                     <p>Key metrics and information at a glance.</p>
                 </header>

                 <!-- Stats Section -->
                 <h2 class="f9xr-section-subheader"><i class="fas fa-chart-pie"></i> Statistics</h2>
                 <div class="f9xr-grid-container f9xr-stats-container">
                      <div class="f9xr-card f9xr-stat-card">
                         <i class="fas fa-project-diagram f9xr-stat-icon"></i>
                         <div class="f9xr-stat-number" data-target="0">0</div> <!-- Target updated by JS -->
                         <div class="f9xr-stat-label">Total Projects</div>
                     </div>
                     <div class="f9xr-card f9xr-stat-card">
                         <i class="fas fa-tags f9xr-stat-icon"></i>
                         <div class="f9xr-stat-number" data-target="0">0</div> <!-- Target updated by JS -->
                         <div class="f9xr-stat-label">Categories</div>
                     </div>
                      <div class="f9xr-card f9xr-stat-card">
                         <i class="fas fa-users f9xr-stat-icon"></i>
                         <div class="f9xr-stat-number" data-target="1572">0</div> <!-- Demo -->
                         <div class="f9xr-stat-label">Active Users (Demo)</div>
                     </div>
                     <div class="f9xr-card f9xr-stat-card">
                         <i class="fas fa-eye f9xr-stat-icon"></i>
                         <div class="f9xr-stat-number" data-target="8950">0</div> <!-- Demo -->
                         <div class="f9xr-stat-label">Page Views (Demo)</div>
                     </div>
                 </div>

                 <div class="f9xr-hr"></div>

                 <!-- Features Section (Integrated) -->
                 <h2 class="f9xr-section-subheader"><i class="fas fa-star"></i> Core Features</h2>
                 <div class="f9xr-grid-container">
                      <div class="f9xr-card">
                          <h3><i class="fas fa-list-alt"></i> Centralized Access</h3>
                          <p>View all your projects from a single, unified interface.</p>
                      </div>
                      <div class="f9xr-card">
                          <h3><i class="fas fa-search"></i> Header Search</h3>
                          <p>Instantly find projects using the search bar in the header.</p>
                      </div>
                      <div class="f9xr-card">
                          <h3><i class="fas fa-filter"></i> Advanced Filtering</h3>
                          <p>Filter projects efficiently by one or multiple categories.</p>
                      </div>
                      <div class="f9xr-card">
                           <h3><i class="fas fa-arrows-alt-h"></i> Resizable Layout</h3>
                           <p>Adjust the sidebar width to your preference on desktop.</p>
                       </div>
                       <div class="f9xr-card">
                           <h3><i class="fas fa-cog"></i> Customization</h3>
                           <p>Personalize theme, fonts, and sizes via the settings panel.</p>
                       </div>
                       <div class="f9xr-card">
                           <h3><i class="fas fa-mobile-alt"></i> Responsive Design</h3>
                           <p>Access your dashboard seamlessly on any device.</p>
                       </div>
                 </div>

                 <div class="f9xr-hr"></div>

                 <!-- User Reviews (Integrated - Demo) -->
                 <h2 class="f9xr-section-subheader"><i class="fas fa-comments"></i> User Reviews (Demo)</h2>
                 <div class="f9xr-grid-container">
                     <div class="f9xr-card f9xr-review-card">
                         <div class="f9xr-review-stars">
                             <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                         </div>
                         <p>"This dashboard is exactly what I needed! Makes navigating between my crypto projects so much easier."</p>
                         <span class="f9xr-review-author">- Crypto Enthusiast</span>
                     </div>
                     <div class="f9xr-card f9xr-review-card">
                          <div class="f9xr-review-stars">
                              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="far fa-star"></i>
                          </div>
                          <p>"Love the clean design, theme options, and responsiveness. Works perfectly on my phone."</p>
                          <span class="f9xr-review-author">- Web Developer</span>
                      </div>
                      <div class="f9xr-card f9xr-review-card">
                          <div class="f9xr-review-stars">
                              <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                          </div>
                          <p>"Great tool for organizing blogspot sites. The adjustable layout is a nice touch."</p>
                          <span class="f9xr-review-author">- Blogger</span>
                      </div>
                 </div>

                 <div class="f9xr-hr"></div>

                 <!-- FAQ Section (Integrated) -->
                  <h2 class="f9xr-section-subheader"><i class="fas fa-question-circle"></i> FAQ</h2>
                 <div> <!-- Wrapper for FAQ items -->
                     <div class="f9xr-faq-item">
                         <div class="f9xr-faq-question">
                             <span>Why can't I see some project websites?</span>
                             <i class="fas fa-chevron-down f9xr-faq-toggle-icon"></i>
                         </div>
                         <div class="f9xr-faq-answer">
                             <p>Some websites implement security policies (like `X-Frame-Options`) that prevent them from being embedded in an iframe. This is controlled by the external website.</p>
                         </div>
                     </div>
                     <div class="f9xr-faq-item">
                         <div class="f9xr-faq-question">
                             <span>How do I change the appearance?</span>
                             <i class="fas fa-chevron-down f9xr-faq-toggle-icon"></i>
                         </div>
                         <div class="f9xr-faq-answer">
                             <p>Click the gear icon <i class="fas fa-cog"></i> in the top-right header to open the Settings panel. You can adjust the theme (light/dark/system), font family, font size, and sidebar spacing.</p>
                         </div>
                     </div>
                     <div class="f9xr-faq-item">
                         <div class="f9xr-faq-question">
                             <span>How does the resizable sidebar work?</span>
                             <i class="fas fa-chevron-down f9xr-faq-toggle-icon"></i>
                         </div>
                         <div class="f9xr-faq-answer">
                             <p>On desktop screens, hover your mouse over the thin line between the sidebar and the main content area. Your cursor will change. Click and drag to resize the sidebar. You can also click the arrow button <i class="fas fa-chevron-left"></i> at the bottom of the sidebar to fully collapse or expand it.</p>
                         </div>
                     </div>
                 </div>

            </section> <!-- End f9xr-dashboard-section -->

            <!-- Iframe Container -->
            <div class="f9xr-iframe-wrapper f9xr-hidden" id="f9xr-iframe-wrapper">
                 <div class="f9xr-iframe-loader" id="f9xr-iframe-loader">
                    <div class="f9xr-loader-dots"> <div></div> <div></div> <div></div> </div>
                    <span>Loading Project...</span>
                 </div>
                <iframe id="f9xr-iframe" class="f9xr-iframe" src="about:blank" title="Project Content" sandbox="allow-scripts allow-same-origin allow-popups allow-forms"></iframe> <!-- Added sandbox -->
            </div>

        </main>
    </div>

     <!-- Mobile Nav Overlay -->
     <div class="f9xr-mobile-nav-overlay f9xr-hidden" id="f9xr-mobile-nav-overlay"></div>

     <!-- Settings Panel -->
     <div class="f9xr-settings-overlay f9xr-hidden" id="f9xr-settings-overlay"></div>
     <div class="f9xr-settings-panel" id="f9xr-settings-panel">
         <div class="f9xr-settings-header">
             <h3><i class="fas fa-palette"></i> Settings</h3>
             <button class="f9xr-settings-close-btn" id="f9xr-settings-close-btn" aria-label="Close Settings"><i class="fas fa-times"></i></button>
         </div>
         <div class="f9xr-settings-content">
             <!-- Theme Selection -->
             <div class="f9xr-setting-group">
                 <label>Theme</label>
                 <div class="f9xr-theme-options">
                     <input type="radio" id="f9xr-theme-light" name="theme" value="light">
                     <label for="f9xr-theme-light">
                         <i class="fas fa-sun f9xr-theme-icon"></i><span>Light</span>
                     </label>
                     <input type="radio" id="f9xr-theme-dark" name="theme" value="dark">
                     <label for="f9xr-theme-dark">
                         <i class="fas fa-moon f9xr-theme-icon"></i><span>Dark</span>
                     </label>
                     <input type="radio" id="f9xr-theme-system" name="theme" value="system">
                     <label for="f9xr-theme-system">
                          <i class="fas fa-desktop f9xr-theme-icon"></i><span>System</span>
                     </label>
                 </div>
             </div>

             <!-- Font Family -->
             <div class="f9xr-setting-group">
                 <label for="f9xr-font-family-select">Font Family</label>
                 <select id="f9xr-font-family-select">
                     <option value="'Poppins', sans-serif">Poppins</option>
                     <option value="'Roboto', sans-serif">Roboto</option>
                     <option value="'Lato', sans-serif">Lato</option>
                     <option value="'Montserrat', sans-serif">Montserrat</option>
                     <option value="sans-serif">System Default</option>
                 </select>
             </div>

             <!-- Font Size -->
             <div class="f9xr-setting-group">
                 <label for="f9xr-font-size-slider">Font Size</label>
                 <input type="range" id="f9xr-font-size-slider" min="12" max="20" step="1" value="16">
                 <span class="f9xr-font-size-display" id="f9xr-font-size-display">16px</span>
             </div>

             <!-- Sidebar Item Spacing -->
              <div class="f9xr-setting-group">
                  <label>Sidebar Item Spacing</label>
                  <div class="f9xr-spacing-options" id="f9xr-spacing-options">
                      <button data-spacing="0.5rem">Compact</button>
                      <button data-spacing="0.75rem" class="f9xr-active">Default</button> <!-- Default spacing -->
                      <button data-spacing="1rem">Comfortable</button>
                  </div>
              </div>

         </div>
         <div class="f9xr-settings-footer">
             <a href="#" target="_blank"><i class="fas fa-file-contract"></i> Terms of Service</a>
             <a href="#" target="_blank"><i class="fas fa-user-shield"></i> Privacy Policy</a>
             <a href="#" target="_blank"><i class="fas fa-envelope"></i> Contact Us</a>
             <a href="#" target="_blank"><i class="fas fa-flag"></i> Report / Feedback</a>
         </div>
     </div>

</div> <!-- End f9xr-dashboard-container -->

<script>
    const projectData = [
        // ... (Keep the exact same JSON data as before)
        { "name": "TTEarnCrypto - Earn FREE Crypto", "projectURL": "https://ttearncrypto.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "FREE Crypto Radar", "projectURL": "https://freecryptoradar.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "FREE Crypto Shop", "projectURL": "https://freecryptoshop.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "Airdrop Central", "projectURL": "https://ttairdropcentral.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "TTAppStore", "projectURL": "https://ttappstore.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "TONTUFcs", "projectURL": "https://tontufcs.blogspot.com/", "category": "Author" },
        { "name": "MaxBlue Online Games", "projectURL": "https://maxblueonline.blogspot.com/", "category": "Gaming" },
        { "name": "GHOULx Network", "projectURL": "https://ghoulx.blogspot.com/", "category": "Network" },
        { "name": "Growth with Guidance Blog", "projectURL": "https://growwithguidance.blogspot.com/", "category": "Blog, Author" },
        { "name": "TONTUF Tools", "projectURL": "http://tontuftools.blogspot.com/", "category": "Tools, Directory" },
        { "name": "Advice with AI", "projectURL": "https://adviceofai.blogspot.com/", "category": "AI, Directory" },
        { "name": "Kirmada", "projectURL": "https://kirmadakm.blogspot.com/", "category": "Gallery" },
        { "name": "TONTUF", "projectURL": "http://tontuf.blogspot.com/", "category": "Home" },
        { "name": "Gallery of Odds", "projectURL": "http://galleryofodds.blogspot.com/", "category": "Gallery" },
        { "name": "Online Helpfull Tools Portal", "projectURL": "http://onlinehelptoolsportal.blogspot.com/", "category": "Home" },
        { "name": "Dashboard", "projectURL": "http://f9xrdashboard.blogspot.com/", "category": "Home" },
        { "name": "FREE Crypto Shopping", "projectURL": "http://freecryptoshopping.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "F9XR", "projectURL": "http://f9xr.blogspot.com/", "category": "Home" },
        { "name": "Blogger Bookmark Articles", "projectURL": "http://bloggerbookmarkarticles.blogspot.com/", "category": "Blog, Author" },
        { "name": "FREE Crypto Bors", "projectURL": "http://freecryptobros.blogspot.com/", "category": "Crypto, Directory" },
        { "name": "Profit Networks", "projectURL": "http://networksradar.blogspot.com/", "category": "Network" },
        { "name": "Crypto News Radar", "projectURL": "https://cryptoradarnews.blogspot.com/", "category": "News, Author" },
        { "name": "TONTUF Money News", "projectURL": "https://tontufmoney-news.blogspot.com/", "category": "News, Author" }
    ];

    document.addEventListener('DOMContentLoaded', () => {
        // --- Element References ---
        const container = document.getElementById('f9xr-dashboard-container');
        const sidebar = document.getElementById('f9xr-sidebar');
        const resizer = document.getElementById('f9xr-resizer');
        const mainView = document.getElementById('f9xr-main-view');
        const projectListContainer = document.getElementById('f9xr-project-list');
        const categoryFilterContainer = document.getElementById('f9xr-filter-categories');
        const filterContainer = document.getElementById('f9xr-filter-container');
        const filterHeader = document.getElementById('f9xr-filter-header');
        const searchInput = document.getElementById('f9xr-header-search-input'); // Updated ID
        const resetButton = document.getElementById('f9xr-reset-button');
        const iframe = document.getElementById('f9xr-iframe');
        const iframeWrapper = document.getElementById('f9xr-iframe-wrapper');
        const iframeLoader = document.getElementById('f9xr-iframe-loader');
        const navToggleBtn = document.getElementById('f9xr-nav-toggle-btn');
        const mobileNavOverlay = document.getElementById('f9xr-mobile-nav-overlay');
        const dashboardSectionLink = document.querySelector('.f9xr-sidebar-nav-link[data-section="f9xr-dashboard-section"]');
        const contentSections = document.querySelectorAll('.f9xr-content-section'); // Only one section now
        const faqItems = document.querySelectorAll('.f9xr-faq-item');
        const logoLink = document.getElementById('f9xr-logo-link');
        const sidebarCollapseBtn = document.getElementById('f9xr-sidebar-collapse-btn');

        // Settings Panel Elements
         const settingsToggleBtn = document.getElementById('f9xr-settings-toggle-btn');
         const settingsPanel = document.getElementById('f9xr-settings-panel');
         const settingsOverlay = document.getElementById('f9xr-settings-overlay');
         const settingsCloseBtn = document.getElementById('f9xr-settings-close-btn');
         const themeRadios = document.querySelectorAll('input[name="theme"]');
         const fontFamilySelect = document.getElementById('f9xr-font-family-select');
         const fontSizeSlider = document.getElementById('f9xr-font-size-slider');
         const fontSizeDisplay = document.getElementById('f9xr-font-size-display');
         const spacingOptionsContainer = document.getElementById('f9xr-spacing-options');
         const spacingButtons = spacingOptionsContainer.querySelectorAll('button');

        let allCategories = new Set();
        let groupedProjects = {};
        let uniqueProjectCount = 0;
        const uniqueUrls = new Set();

        // --- Constants ---
        const SIDEBAR_WIDTH_STORAGE_KEY = 'f9xr_sidebarWidth';
        const SIDEBAR_COLLAPSED_STORAGE_KEY = 'f9xr_sidebarCollapsed';
        const THEME_STORAGE_KEY = 'f9xr_theme';
        const FONT_FAMILY_STORAGE_KEY = 'f9xr_fontFamily';
        const FONT_SIZE_STORAGE_KEY = 'f9xr_fontSize';
        const SPACING_STORAGE_KEY = 'f9xr_spacing';
        const MIN_SIDEBAR_WIDTH = 180; // Min width for resizing
        const MAX_SIDEBAR_WIDTH_PERCENT = 50; // Max width % of viewport


        // --- Data Processing ---
        projectData.forEach((project, index) => {
             if (!uniqueUrls.has(project.projectURL)) {
                 uniqueUrls.add(project.projectURL);
                 uniqueProjectCount++;
             }
            const categories = project.category.split(',').map(cat => cat.trim()).filter(cat => cat);
            if (categories.length === 0) categories.push('Uncategorized');

            categories.forEach(cat => {
                allCategories.add(cat);
                if (!groupedProjects[cat]) groupedProjects[cat] = [];
                 if (!groupedProjects[cat].some(p => p.projectURL === project.projectURL)) {
                    // Add unique ID for potential future use (not strictly needed now)
                    groupedProjects[cat].push({ ...project, id: `proj-${index}`, originalCategories: categories });
                 }
            });
        });
        const sortedCategories = Array.from(allCategories).sort();

        // --- Update Stats Based on Data ---
        function updateStats() {
            const projectStatEl = document.querySelector('#f9xr-dashboard-section .f9xr-stat-number[data-target="0"]'); // Select the project counter
            const categoryStatEl = document.querySelectorAll('#f9xr-dashboard-section .f9xr-stat-number[data-target="0"]')[1]; // Select the category counter

            if (projectStatEl) projectStatEl.dataset.target = uniqueProjectCount;
            if (categoryStatEl) categoryStatEl.dataset.target = sortedCategories.length;

            // Reset display text for animation if section is visible
             if (!document.getElementById('f9xr-dashboard-section').classList.contains('f9xr-hidden')) {
                 if (projectStatEl) projectStatEl.textContent = '0';
                 if (categoryStatEl) categoryStatEl.textContent = '0';
                 // Only animate if the section is currently visible
                 animateCounters();
                 statsAnimated = true; // Mark as animated immediately if visible on load
             }
        }


        // --- Animated Counter Function ---
        function animateCounters() {
            const counters = document.querySelectorAll('#f9xr-dashboard-section .f9xr-stat-number');
            counters.forEach(counter => {
                const target = +counter.dataset.target;
                if (isNaN(target)) return; // Skip if target is not a number

                // Check if already animated or currently animating
                 if (counter.dataset.isAnimating === 'true' || parseInt(counter.textContent.replace(/,/g, '')) === target) {
                     return;
                 }
                 counter.dataset.isAnimating = 'true'; // Mark as animating

                counter.innerText = '0'; // Start from 0
                const duration = 1500; // ms
                const stepTime = 20; // Update interval
                const steps = duration / stepTime;
                const increment = Math.ceil(target / steps);

                let current = 0;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.innerText = target.toLocaleString();
                        clearInterval(timer);
                         delete counter.dataset.isAnimating; // Remove flag
                    } else {
                        counter.innerText = current.toLocaleString();
                    }
                }, stepTime);
            });
        }

        // --- Intersection Observer for Stats Animation ---
        let statsAnimated = false;
        const dashboardSection = document.getElementById('f9xr-dashboard-section');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !statsAnimated && entry.target.id === 'f9xr-dashboard-section') {
                    animateCounters();
                    statsAnimated = true;
                }
                // Optional: Reset if needed
                // else if (!entry.isIntersecting && entry.target.id === 'f9xr-dashboard-section') {
                //    statsAnimated = false;
                //    document.querySelectorAll('#f9xr-dashboard-section .f9xr-stat-number').forEach(c => c.innerText = '0');
                // }
            });
        }, { threshold: 0.1 }); // Trigger when 10% visible

        if (dashboardSection) {
            observer.observe(dashboardSection);
        }


        // --- Populate UI ---
        function populateSidebar() {
            projectListContainer.innerHTML = '';
            categoryFilterContainer.innerHTML = '';

            // Filters
            sortedCategories.forEach(category => {
                const filterId = `f9xr-filter-${category.replace(/[^a-zA-Z0-9]/g, '-')}`;
                const filterItem = document.createElement('div');
                filterItem.className = 'f9xr-category-filter-item';
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox'; checkbox.id = filterId; checkbox.value = category;
                checkbox.className = 'f9xr-category-filter-checkbox';
                checkbox.addEventListener('change', applyFiltersAndSearch);
                const label = document.createElement('label');
                label.htmlFor = filterId;
                 // Create span for text to hide it when collapsed
                 const labelText = document.createElement('span');
                 labelText.textContent = category;
                label.append(checkbox, labelText); filterItem.appendChild(label);
                categoryFilterContainer.appendChild(filterItem);
            });

            // Projects with Schema
            let categoryPosition = 0;
            sortedCategories.forEach(category => {
                if (groupedProjects[category]?.length > 0) {
                    categoryPosition++;
                    const categoryContainer = document.createElement('div');
                    categoryContainer.className = 'f9xr-category-container';
                    categoryContainer.dataset.category = category;
                    // Schema for category list item
                     categoryContainer.setAttribute('itemprop', 'itemListElement');
                     categoryContainer.setAttribute('itemscope', '');
                     categoryContainer.setAttribute('itemtype', 'https://schema.org/ListItem');
                     const metaCatPos = document.createElement('meta');
                     metaCatPos.setAttribute('itemprop', 'position');
                     metaCatPos.content = categoryPosition;
                     categoryContainer.appendChild(metaCatPos);
                     // You could add name/url for the category itself if desired

                    const categoryHeader = document.createElement('div');
                    categoryHeader.className = 'f9xr-category-header';
                    // Added span for text hiding on collapse
                    categoryHeader.innerHTML = `
                        <span class="f9xr-category-title"><i class="fas fa-folder"></i> <span>${category}</span></span>
                        <i class="fas fa-chevron-down f9xr-category-toggle-icon"></i>`;

                    const projectsContainer = document.createElement('div');
                    projectsContainer.className = 'f9xr-category-projects';

                    groupedProjects[category].sort((a, b) => a.name.localeCompare(b.name));

                    let projectPosition = 0;
                    groupedProjects[category].forEach(project => {
                        projectPosition++;
                        const projectItem = document.createElement('div');
                        projectItem.className = 'f9xr-project-item';
                        // Schema for project list item
                        projectItem.setAttribute('itemprop', 'itemListElement');
                        projectItem.setAttribute('itemscope', '');
                        projectItem.setAttribute('itemtype', 'https://schema.org/ListItem');

                         const metaProjPos = document.createElement('meta');
                         metaProjPos.setAttribute('itemprop', 'position');
                         metaProjPos.content = `${categoryPosition}.${projectPosition}`; // Hierarchical position
                         projectItem.appendChild(metaProjPos);

                         const nameSpan = document.createElement('span');
                         nameSpan.setAttribute('itemprop', 'name');
                         nameSpan.textContent = project.name;
                         projectItem.appendChild(nameSpan);

                         const linkTag = document.createElement('link');
                         linkTag.setAttribute('itemprop', 'url');
                         linkTag.href = project.projectURL;
                         projectItem.appendChild(linkTag);


                        projectItem.dataset.url = project.projectURL;
                        projectItem.dataset.name = project.name.toLowerCase();
                        projectItem.dataset.categories = JSON.stringify(project.originalCategories);
                        projectItem.addEventListener('click', () => loadProject(project.projectURL, projectItem));
                        projectsContainer.appendChild(projectItem);
                    });

                    categoryHeader.addEventListener('click', () => {
                        const isCollapsed = projectsContainer.classList.toggle('f9xr-collapsed');
                        categoryHeader.classList.toggle('f9xr-collapsed', isCollapsed);
                        const icon = categoryHeader.querySelector('.f9xr-category-title i');
                        if (icon) icon.className = isCollapsed ? 'fas fa-folder' : 'fas fa-folder-open';
                    });

                    categoryContainer.appendChild(categoryHeader);
                    categoryContainer.appendChild(projectsContainer);
                    projectListContainer.appendChild(categoryContainer);
                }
            });
        }

        // --- Load Project into Iframe ---
        function loadProject(url, clickedItem) {
            // Hide dashboard section
            contentSections.forEach(sec => sec.classList.add('f9xr-hidden'));

            // Show iframe wrapper and loader
            iframeWrapper.classList.remove('f9xr-hidden');
            iframeLoader.classList.remove('f9xr-hidden');
             // Reset loader text/icon in case of previous error
             iframeLoader.innerHTML = `
                 <div class="f9xr-loader-dots"> <div></div> <div></div> <div></div> </div>
                 <span>Loading Project...</span>
             `;
            iframe.src = 'about:blank';

            // Add slight delay before loading src
            setTimeout(() => {
                 // Basic check for potentially problematic URLs (e.g., internal file paths - shouldn't happen with http data)
                 if (!url || !url.toLowerCase().startsWith('http')) {
                    console.error("Invalid project URL:", url);
                    showLoadError("Invalid project URL provided.");
                    return;
                 }
                 iframe.src = url;
             }, 100);


            // Highlight active project
            document.querySelectorAll('.f9xr-project-item.f9xr-active-project').forEach(item => item.classList.remove('f9xr-active-project'));
            if (clickedItem) clickedItem.classList.add('f9xr-active-project');

            // Deactivate dashboard section link
             dashboardSectionLink?.classList.remove('f9xr-active-section');


            // Hide sidebar on mobile
            if (window.innerWidth <= 768) {
                sidebar.classList.remove('f9xr-sidebar-visible');
                mobileNavOverlay.classList.add('f9xr-hidden');
                mobileNavOverlay.classList.remove('f9xr-overlay-visible');
            }
        }

        // --- Show Iframe Loading Error ---
         function showLoadError(message = "Error loading project.") {
             iframeLoader.innerHTML = `
                 <i class="fas fa-exclamation-triangle fa-2x" style="color: #f87171;"></i>
                 <span>${message}</span>
                 <small style="max-width: 80%; text-align: center;">The website might prevent embedding or the URL is invalid.</small>
             `;
              iframeLoader.classList.remove('f9xr-hidden'); // Ensure message is visible
         }

        // --- Iframe Load/Error Events ---
        iframe.addEventListener('load', () => iframeLoader.classList.add('f9xr-hidden'));
        // Note: 'error' event on iframe is not reliable for cross-origin load failures like X-Frame-Options.
        // A common workaround is a timeout, assuming if 'load' hasn't fired after X seconds, it failed.
        let loadTimeout;
        iframe.addEventListener('loadstart', () => { // Non-standard, might not work everywhere
            clearTimeout(loadTimeout);
            loadTimeout = setTimeout(() => {
                // If loader is still visible after ~10 seconds, assume error
                if (!iframeLoader.classList.contains('f9xr-hidden')) {
                    showLoadError("Loading timed out or was blocked.");
                }
            }, 10000); // 10 second timeout
        });
         // Clear timeout if load succeeds
         iframe.addEventListener('load', () => clearTimeout(loadTimeout));


        // --- Filtering and Search Logic ---
        function applyFiltersAndSearch() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const selectedCategories = Array.from(categoryFilterContainer.querySelectorAll('input:checked')).map(cb => cb.value);

            document.querySelectorAll('.f9xr-project-item.f9xr-highlight').forEach(item => item.classList.remove('f9xr-highlight'));

            let hasVisibleProjects = false;
            document.querySelectorAll('.f9xr-project-item').forEach(item => {
                const projectName = item.dataset.name;
                const projectCategories = JSON.parse(item.dataset.categories || '[]');
                const nameMatch = !searchTerm || projectName.includes(searchTerm);
                const categoryMatch = selectedCategories.length === 0 || selectedCategories.some(sc => projectCategories.includes(sc));

                const isVisible = nameMatch && categoryMatch;
                item.classList.toggle('f9xr-hidden', !isVisible);
                if (isVisible) {
                    hasVisibleProjects = true;
                    if (searchTerm && nameMatch) {
                        item.classList.add('f9xr-highlight');
                    }
                }
            });

            // Show/Hide category headers
            document.querySelectorAll('.f9xr-category-container').forEach(container => {
                const hasVisibleItems = container.querySelector('.f9xr-project-item:not(.f9xr-hidden)');
                container.classList.toggle('f9xr-hidden', !hasVisibleItems);
            });

             // Optional: Show a "No results" message
             // Add a placeholder div in HTML: <div id="f9xr-no-results" class="f9xr-hidden">No projects found.</div>
             // const noResultsMsg = document.getElementById('f9xr-no-results');
             // if (noResultsMsg) noResultsMsg.classList.toggle('f9xr-hidden', hasVisibleProjects);
        }


        // --- Show Dashboard Section ---
        function showDashboardSection() {
            // Hide iframe
             iframeWrapper.classList.add('f9xr-hidden');
             iframe.src = 'about:blank';

             // Show the dashboard section
             contentSections.forEach(sec => sec.classList.remove('f9xr-hidden')); // Assuming only one section now

             // Update active link in sidebar
             dashboardSectionLink?.classList.add('f9xr-active-section');

              // Remove active project highlight
             document.querySelectorAll('.f9xr-project-item.f9xr-active-project').forEach(item => item.classList.remove('f9xr-active-project'));

             // Trigger stats animation if not already done
             if (!statsAnimated) {
                setTimeout(animateCounters, 50); // Slight delay to ensure visibility
                statsAnimated = true;
             }

             // Hide sidebar on mobile
             if (window.innerWidth <= 768) {
                 sidebar.classList.remove('f9xr-sidebar-visible');
                 mobileNavOverlay.classList.add('f9xr-hidden');
                 mobileNavOverlay.classList.remove('f9xr-overlay-visible');
             }
        }

         // --- Toggle Filter Section ---
         function toggleFilterCollapse() {
             filterContainer.classList.toggle('f9xr-collapsed');
             // Optional: Save state to localStorage
             // localStorage.setItem('f9xr_filterCollapsed', filterContainer.classList.contains('f9xr-collapsed'));
         }
         // --- Initialize Filter Collapse State (Optional) ---
         // if (localStorage.getItem('f9xr_filterCollapsed') === 'true') {
         //     filterContainer.classList.add('f9xr-collapsed');
         // }

        // --- Sidebar Resizing Logic ---
        let isResizing = false;
        let initialSidebarWidth = 0;
        let startX = 0;

        function startResize(e) {
             // Prevent resizing on touch devices or mobile view
            if (e.touches || window.innerWidth <= 768 || sidebar.classList.contains('f9xr-sidebar-collapsed')) {
                 return;
             }
            isResizing = true;
            startX = e.clientX;
            initialSidebarWidth = sidebar.offsetWidth;
            resizer.classList.add('f9xr-resizing');
            document.body.style.cursor = 'col-resize'; // Change cursor globally
            document.body.style.userSelect = 'none'; // Prevent text selection
            document.addEventListener('mousemove', doResize);
            document.addEventListener('mouseup', stopResize);
        }

        function doResize(e) {
            if (!isResizing) return;
            const currentX = e.clientX;
            const diffX = currentX - startX;
            let newWidth = initialSidebarWidth + diffX;

            // Constraints
            const maxAllowedWidth = window.innerWidth * (MAX_SIDEBAR_WIDTH_PERCENT / 100);
             newWidth = Math.max(MIN_SIDEBAR_WIDTH, newWidth); // Min width
             newWidth = Math.min(newWidth, maxAllowedWidth); // Max width

            sidebar.style.width = `${newWidth}px`;
            // Adjust main view margin if needed (Flexbox handles this automatically)
        }

        function stopResize() {
            if (isResizing) {
                isResizing = false;
                resizer.classList.remove('f9xr-resizing');
                document.body.style.cursor = '';
                document.body.style.userSelect = '';
                document.removeEventListener('mousemove', doResize);
                document.removeEventListener('mouseup', stopResize);
                // Save final width to localStorage
                localStorage.setItem(SIDEBAR_WIDTH_STORAGE_KEY, sidebar.style.width);
            }
        }

        // --- Sidebar Collapse Logic ---
        function toggleSidebarCollapse() {
            sidebar.classList.toggle('f9xr-sidebar-collapsed');
             const isCollapsed = sidebar.classList.contains('f9xr-sidebar-collapsed');
            localStorage.setItem(SIDEBAR_COLLAPSED_STORAGE_KEY, isCollapsed);

             // Restore original width if expanding, respect stored width if collapsing
             if (isCollapsed) {
                 sidebar.style.width = ''; // Let CSS handle collapsed width
             } else {
                 const storedWidth = localStorage.getItem(SIDEBAR_WIDTH_STORAGE_KEY);
                 sidebar.style.width = storedWidth || 'var(--f9xr-sidebar-width)'; // Restore or default
             }
        }

        // --- Settings Panel Logic ---
        function openSettings() {
            settingsPanel.classList.add('f9xr-settings-visible');
            settingsOverlay.classList.add('f9xr-settings-visible');
            settingsOverlay.classList.remove('f9xr-hidden');
        }
        function closeSettings() {
            settingsPanel.classList.remove('f9xr-settings-visible');
            settingsOverlay.classList.remove('f9xr-settings-visible');
            // Delay hiding overlay for transition
            setTimeout(() => settingsOverlay.classList.add('f9xr-hidden'), 300); // Match transition duration
        }

         // Apply Theme
         function applyTheme(theme) {
            container.classList.remove('f9xr-light-theme', 'f9xr-dark-theme');
            if (theme === 'light') {
                container.classList.add('f9xr-light-theme');
            } else if (theme === 'dark') {
                 container.classList.add('f9xr-dark-theme'); // Dark is default, but explicit class helps
            } else { // System theme
                 const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                 if (prefersDark) container.classList.add('f9xr-dark-theme');
                 else container.classList.add('f9xr-light-theme');
             }
             localStorage.setItem(THEME_STORAGE_KEY, theme);
         }

          // Apply Font Family
         function applyFontFamily(font) {
             container.style.setProperty('--f9xr-font-family', font);
             localStorage.setItem(FONT_FAMILY_STORAGE_KEY, font);
         }

          // Apply Font Size
         function applyFontSize(size) {
             document.documentElement.style.fontSize = `${size}px`; // Apply to html root
             fontSizeDisplay.textContent = `${size}px`;
             localStorage.setItem(FONT_SIZE_STORAGE_KEY, size);
         }

         // Apply Spacing
         function applySpacing(spacingValue) {
             container.style.setProperty('--f9xr-sidebar-item-vertical-padding', spacingValue);
             localStorage.setItem(SPACING_STORAGE_KEY, spacingValue);
             // Update active button state
             spacingButtons.forEach(btn => {
                 btn.classList.toggle('f9xr-active', btn.dataset.spacing === spacingValue);
             });
         }

         // Load Settings from Local Storage
         function loadSettings() {
             // Sidebar Width & Collapse State
             const storedWidth = localStorage.getItem(SIDEBAR_WIDTH_STORAGE_KEY);
             const isCollapsed = localStorage.getItem(SIDEBAR_COLLAPSED_STORAGE_KEY) === 'true';
             if (isCollapsed && window.innerWidth > 768) { // Apply collapsed only on desktop
                 sidebar.classList.add('f9xr-sidebar-collapsed');
                 sidebar.style.width = ''; // Let CSS handle collapsed width
             } else if (storedWidth && window.innerWidth > 768) { // Apply width only on desktop
                 sidebar.style.width = storedWidth;
             } else {
                 sidebar.style.width = ''; // Use CSS default otherwise
             }

             // Theme
             const storedTheme = localStorage.getItem(THEME_STORAGE_KEY) || 'system';
             applyTheme(storedTheme);
             document.querySelector(`input[name="theme"][value="${storedTheme}"]`).checked = true;

             // Font Family
             const storedFont = localStorage.getItem(FONT_FAMILY_STORAGE_KEY) || "'Poppins', sans-serif";
             applyFontFamily(storedFont);
             fontFamilySelect.value = storedFont;

              // Font Size
             const storedSize = localStorage.getItem(FONT_SIZE_STORAGE_KEY) || '16';
             applyFontSize(storedSize);
             fontSizeSlider.value = storedSize;

             // Spacing
             const storedSpacing = localStorage.getItem(SPACING_STORAGE_KEY) || '0.75rem'; // Default spacing value
             applySpacing(storedSpacing);
         }

         // Listen for system theme changes
         window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
             const currentTheme = localStorage.getItem(THEME_STORAGE_KEY) || 'system';
             if (currentTheme === 'system') {
                 applyTheme('system'); // Re-apply system theme
             }
         });


        // --- Event Listeners ---
        searchInput.addEventListener('input', applyFiltersAndSearch);
        filterHeader.addEventListener('click', toggleFilterCollapse);

        resetButton.addEventListener('click', () => {
            searchInput.value = '';
            categoryFilterContainer.querySelectorAll('input').forEach(cb => cb.checked = false);
            applyFiltersAndSearch();
            showDashboardSection(); // Show default section
        });

        logoLink.addEventListener('click', (e) => { e.preventDefault(); showDashboardSection(); });
        dashboardSectionLink?.addEventListener('click', (e) => { e.preventDefault(); showDashboardSection(); });


        // FAQ Toggles
        faqItems.forEach(item => {
            const question = item.querySelector('.f9xr-faq-question');
            question?.addEventListener('click', () => item.classList.toggle('f9xr-active'));
        });

        // Sidebar Resize Listener
        resizer?.addEventListener('mousedown', startResize);
        sidebarCollapseBtn?.addEventListener('click', toggleSidebarCollapse);

        // Mobile Nav Toggle
         navToggleBtn.addEventListener('click', () => {
             sidebar.classList.toggle('f9xr-sidebar-visible');
             mobileNavOverlay.classList.toggle('f9xr-overlay-visible');
             mobileNavOverlay.classList.toggle('f9xr-hidden');
         });
         mobileNavOverlay.addEventListener('click', () => {
             sidebar.classList.remove('f9xr-sidebar-visible');
             mobileNavOverlay.classList.add('f9xr-hidden');
             mobileNavOverlay.classList.remove('f9xr-overlay-visible');
         });

        // Settings Panel Listeners
        settingsToggleBtn.addEventListener('click', openSettings);
        settingsCloseBtn.addEventListener('click', closeSettings);
        settingsOverlay.addEventListener('click', closeSettings); // Close on overlay click
        themeRadios.forEach(radio => radio.addEventListener('change', (e) => applyTheme(e.target.value)));
        fontFamilySelect.addEventListener('change', (e) => applyFontFamily(e.target.value));
        fontSizeSlider.addEventListener('input', (e) => applyFontSize(e.target.value));
        spacingButtons.forEach(button => button.addEventListener('click', () => applySpacing(button.dataset.spacing)));


        // 3D Card Effect Listener
        document.querySelectorAll('.f9xr-card').forEach(card => {
             card.addEventListener('mousemove', (e) => {
                if (window.innerWidth < 768) return; // Disable on smaller screens for performance/touch issues

                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2; // x position within the element.
                const y = e.clientY - rect.top - rect.height / 2; // y position within the element.

                const rotateY = (x / (rect.width / 2)) * 3; // Max rotation 3deg
                const rotateX = (-y / (rect.height / 2)) * 3; // Max rotation 3deg

                card.style.setProperty('--f9xr-rotate-x', `${rotateX}deg`);
                card.style.setProperty('--f9xr-rotate-y', `${rotateY}deg`);
            });

             card.addEventListener('mouseleave', () => {
                card.style.setProperty('--f9xr-rotate-x', `0deg`);
                card.style.setProperty('--f9xr-rotate-y', `0deg`);
             });
         });

        // --- Initialisation ---
        loadSettings(); // Load saved settings first
        updateStats(); // Set correct target numbers
        populateSidebar();
        applyFiltersAndSearch();
        showDashboardSection(); // Show Dashboard by default

    });
</script>

</body>
</html>